<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>1073320</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="carousel.css" rel="stylesheet">
  </head>

  <script>
    var ux,uy,sx,sy,bb,t2,m=0;
    var second = 30;
    var counting=0;
    var bx=[];
    var by=[];
    var ufo=[];
    var tb=[];; 
    var click=[];
    click[0]=0;
    var b=[];

    function start()
    {    
      m=0;
      second=30;
      document.getElementById("second").innerHTML=second+"s";
      document.getElementById("startBtn").setAttribute("style","display:none");
      document.getElementById("secondDiv").setAttribute("style","font-size:30px;color:black;text-align: center;display:display;");
      document.getElementById("station").setAttribute("style", "position:absolute;height:200px;width:200px;top:600px;left:187px;display:display");
      document.getElementById("story").setAttribute("style", "display:none; height:500px; width:1000px;margin-left:100px");
      document.getElementById("endPic").setAttribute("style","display:none; height:500px; width:1000px;margin-left:100px");
      console.log(b);
      b=[];
      bb=document.createElement("img");
      bb.src="assets/img/game1/bullet.png";
      bb.style.position="absolute";
      bb.style.top="500px";
      bb.style.left="275px";
      bb.style.width="30px";
      bb.style.height="100px";
      document.getElementById("bullet").appendChild(bb);
      b[b.length]=bb;
      document.getElementById("bullet").setAttribute("style","display:display;");

      clearInterval(counting);
      counting=setInterval("countDown()",1000);
      document.getElementById("a").innerHTML=m+"隻";
      clearInterval(t2);
      t2=setInterval("add()",1000);
      document.onmousedown=function(e)
      {
        var sx=e.clientX;
        if(sx>=-100+tb1.offsetLeft && sx<=1100+tb1.offsetLeft)
        {
          var k=tb.length;
          if(k>0)
            clearInterval(tb[k-1])
          tb[k]=setInterval("att()",100);
          click[k]=1;
          click[b.length]=0;

          bb=document.createElement("img");
          bb.src="assets/img/game1/bullet.png";
          bb.style.position="absolute";
          bb.style.top="500px";
          bb.style.left=(sx + (100 - 15 - 360))+"px";
          bb.style.width="30px";
          bb.style.height="100px";
          document.getElementById("bullet").appendChild(bb);
          b[b.length]=bb;
        }
      }
    }

    function add()
    {
      if (ufo.length < 25)
      {
        var n=document.createElement("img");
        n.style.position="absolute";
        n.style.top=(Math.floor(Math.random()*100))+"px";
        n.style.left=(Math.floor(Math.random()*1100))+"px";
        n.style.width="80px";
        n.style.height="80px";
        n.src="assets/img/game1/badGuy.png";
        document.getElementById("top").appendChild(n);
        ufo[ufo.length]=n;
      }
    }

    function countDown()
    {
      second -= 1;
      if(second < 0)
      {
        endGame();
        document.getElementById('startBtn').setAttribute("style","display:display;margin-left: 30px;");
        document.getElementById('startBtn').innerHTML = "重新開始";
      }
      else
      {
        document.getElementById("second").innerHTML=second+"s";
      }
    }

    function endGame()
    {
      document.getElementById("secondDiv").setAttribute("style","display:none;");
      document.getElementById("endPic").setAttribute("style","display:display; height:500px; width:1000px;margin-left:100px");
      document.getElementById("station").setAttribute("style","display:none;");
      document.getElementById("bullet").setAttribute("style","display:none;");

      clearInterval(t2);
      for (var k=0;k<ufo.length;k=k+1)
        document.getElementById("top").removeChild(ufo[k]);
      ufo=[];
      if(tb.length>0)
        clearInterval(tb[tb.length-1]);

      tb=[];
      click=[];
      click[0]=0;

      while (document.getElementById("bullet").firstChild) 
      {
        document.getElementById("bullet").removeChild(document.getElementById("bullet").firstChild);
      }
      document.onmousedown=function(e){};
    }

    function go()
    {
      for (var i=0;i<ufo.length;i=i+1)
      {
        ux=parseInt(ufo[i].style.left);
        uy=parseInt(ufo[i].style.top);
        ux=ux+20;
        var tb1 = document.getElementById('tb1');
        if (ux > 1100) 
          ux=0;
        ufo[i].style.left=ux+"px";
      }
    }

    var t = setInterval("go()",100);

    document.onmousemove=function(e)
    {
      var sx=e.clientX;
      var tb1 = document.getElementById('tb1');
      if(sx>=-100+tb1.offsetLeft && sx<=1100+tb1.offsetLeft)
      {
        document.getElementById("station").style.left=sx-360+"px";
        if(b.length>0)
          b[b.length-1].style.left=(sx+88-360)+"px";
      }
    }

    function att()
    {
      for(var k=0;k<tb.length;k=k+1)
      {
        if(click[k]==1)
        {
          bx[k]=parseInt(b[k].style.left);  
          by[k]=parseInt(b[k].style.top);
          by[k]=by[k]-20;
          b[k].style.top=by[k]+"px";
          for(var i=0;i<ufo.length;i=i+1)
          {
            ux=parseInt(ufo[i].style.left);
            uy=parseInt(ufo[i].style.top);   
            if (bx[k]>ux && by[k]>uy && bx[k]<ux+80 && by[k]<uy+80)
            {
              document.getElementById("top").removeChild(ufo[i]);
              ufo.splice(i,1);
              click[k]=0;
              document.getElementById("bullet").removeChild(b[k]);
              m=m+1;
              document.getElementById("a").innerHTML=m+"隻";
            }
          }
          if(by[k]<0)
          {
            click[k]=0;
            document.getElementById("bullet").removeChild(b[k]);
          }
        }
      }
    }
   </script>

   
  <body style="background-color: #e9f4f7 ;font-family: Microsoft JhengHei;">
    <header>
      <nav class="navbar navbar-expand-md navbar-dark fixed-top" style="background-color: #4D6091;">
        <img src="assets/img/pic.png" style="height:50px;width:75px">&nbsp&nbsp
        <a class="navbar-brand" href="index.html" style="color:white"><strong>小新的部落格</strong></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="mindQuiz.html">MindQuiz</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="youtube.html">YouTube</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="rpg.html">RPG</a>
            </li>
            <li class="nav-item dropdown active">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-expanded="false"  style="color: yellow;">
                Portfolios  <span class="sr-only">(current)</span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="game1.html" style="color: black;">Portfolio 1</a></li>
                <li><a class="dropdown-item" href="game2.html" style="color: rgb(186, 186, 186);">Portfolio 2</a></li>
                <li><a class="dropdown-item" href="game3.html" style="color: rgb(186, 186, 186);">Portfolio 3</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="games.html" style="color: rgb(186, 186, 186);">See All</a></li>
              </ul>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="aboutMe.html">About Me</a>
            </li>
          </ul>
          <form class="form-inline mt-2 mt-md-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" style="background-color: #DBDFE9;">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" style="color: #DBDFE9;border-color: #DBDFE9;">Search</button>
          </form>
        </div>
      </nav>
    </header>
<!----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
    <main role="main">
     <!-- START THE FEATURETTES -->
      <hr class="featurette-divider">
        <!------------------------------------------------------------------------------------------------------------------------------>
        <table style="margin:0px auto;width:1200px;margin-top: -50px;">
          <tr style="height:10%">
            <td style="width:90%;">
              <div style="border-width:5;border-style:double;border-color:black;font-size:24px;color:black;width:100px;margin-left:50%;text-align: center;padding: 10px 5px;"><strong id="a">0隻</strong></div>
            </td>
            <td>
              <button onclick="start()" style="display:display;margin-left: 40px;" id="startBtn">&nbsp開始&nbsp</button>
              <div style="font-size:30px;color:black;text-align: center;display:none;" id="secondDiv"><strong id="second">30s</strong></div>
            </td>
            <!--<td>
              <button onclick="clean()">清除</button>
            </td>-->
          </tr>
        </table>
        <br>      
        <table border="1px solid black" style="width:1200px;height:800px; margin:0px auto;position: relative;background-color: #A6FFE9;" id="tb1">
          <tr>
            <td>
              
              <div id="top"></div>
              <div id="bullet"></div>
              <!--<div id="station" style="position:absolute;width:80px;height:30px;background:blue;top:550px;left:200px"></div>-->
              <img id="story" src="assets/img/game1/story.png" style="display:display; height:500px; width:1000px;margin-left:100px">
              <img id="endPic" src="assets/img/game1/thankyou.png" style="display:none; height:500px; width:1000px;margin-left:100px">
              <img id="station" style="position:absolute;height:200px;width:200px;top:600px;left:187px;display:none" src="assets/img/game1/robot.png">
            </td>
          </tr>
          
        </table>
        <!------------------------------------------------------------------------------------------------------------------------------>
      <hr class="featurette-divider"> 
      <!-- FOOTER -->
      <footer class="container">
        <p class="float-right"><a href="#">Back to top</a></p>
        <p>&copy; 2017-2018 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
      </footer>
    </main>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="assets/js/vendor/popper.min.js"></script>
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="assets/js/vendor/holder.min.js"></script>

    <!--<script>
      bb=document.createElement("img");
      bb.src="assets/img/game1/bullet.png";
      bb.style.position="absolute";
      bb.style.top="500px";
      bb.style.left="275px";
      bb.style.width="30px";
      bb.style.height="100px";
      document.getElementById("bullet").appendChild(bb);
      b[b.length]=bb;
  </script>-->
  </body>
</html>
